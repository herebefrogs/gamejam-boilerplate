<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta name=monetization content=$ilp.uphold.com/2kD7NjJBDjBb><style>body{margin:0;text-align:center;background:#000}body,canvas{touch-action:none;user-select:none}</style><canvas id=c></canvas><script>(()=>{var e={},t=t=>delete e[t];addEventListener("keydown",(t=>{t.preventDefault(),t.repeat||(e[t.code]=performance.now())})),addEventListener("keyup",(e=>t(e.code)));var o=t=>{const o=Object.keys(e).filter((e=>t.includes(e))).map((e=>n(e)));return o.length?Math.max(...o):0},n=t=>e[t]||0,a=()=>Object.keys(e).filter((e=>n(e))).length,i=e=>!!n(e)&&t(e);function h(e,t,o){return 0>o?e:o>1?t:e*(1-o)+t*o}function r(e){return new Promise((t=>{var o=new Image;o.onload=()=>{t(o)},o.src=e}))}var m=0,d=0,w=0,v=0,g=0,y=0,s=0,f=0,l=0;addEventListener("pointerdown",(e=>{e.preventDefault(),l=performance.now(),[m,d]=[s,f]=[g,y]=A(e)})),addEventListener("pointermove",(e=>{e.preventDefault(),l&&([m,d]=A(e),m>s?w=h(0,1,((s=m)-g)/30):g>m?w=-h(0,1,(s-(g=m))/30):s>m&&w>=0?(g=m,w=0):m>g&&0>=w&&(s=m,w=0),d>f?v=h(0,1,((f=d)-y)/30):y>d?v=-h(0,1,(f-(y=d))/30):f>d&&v>=0?(y=d,v=0):d>y&&0>=v&&(f=d,v=0))})),addEventListener("pointerup",(e=>{e.preventDefault(),l=0,m=d=w=v=g=y=s=f=0}));var x,p,A=e=>[e.pageX,e.pageY],u=()=>l,M=()=>!!u()&&(l=!0),E=/iPhone|iPad|Android/i.test(navigator.userAgent);function k(e,t,o,n=0,a=1){const i=8*a,h=e.length*i+(e.length-1)*a,r=2===n?h:1===n?h/2:0;[...e].forEach(((e,n)=>{p.drawImage(x,8*"abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/".indexOf(e),0,8,8,t+n*a*9-r,o,i,i)}))}new(window.AudioContext||webkitAudioContext);var b,R,X,D=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","KeyB","KeyA"],Y=0,L=0,U=c.getContext("2d"),K=c.cloneNode(),N=K.getContext("2d");K.width=640,K.height=480;var j=c.cloneNode(),I=j.getContext("2d");j.width=320,j.height=240;var B,O,P,Q,F,T=j.width-100,S=j.height-50,Z=0,z=0,C={hero:{move:[{x:0,y:0,w:16,h:18},{x:16,y:0,w:16,h:18},{x:32,y:0,w:16,h:18},{x:48,y:0,w:16,h:18},{x:64,y:0,w:16,h:18}],speed:100},foe:{move:[{x:0,y:0,w:16,h:18}],speed:0}},G=!0;function H(e,t=0,o=0){const n=C[e].move[0];return{action:"move",frame:0,frameTime:0,h:n.h,moveDown:0,moveLeft:0,moveRight:0,moveUp:0,moveX:0,moveY:0,speed:C[e].speed,type:e,w:n.w,x:t,y:o}}function V(e){e.frameTime+=P,e.frameTime>.1&&(e.frameTime-=.1,e.frame+=1,e.frame%=C[e.type][e.action].length);const t=e.speed*P*(e.moveX&&e.moveY?.7071067811865476:1);e.x+=t*e.moveX,e.y+=t*e.moveY}function J(){G&&(F=requestAnimationFrame(J),O=performance.now(),P=(O-Q)/1e3,(()=>{switch((()=>{switch(L){case 0:i(D[Y])&&Y++,(a()||M())&&(Y=0,b=60,Z=z=0,R=H("hero",j.width/2,j.height/2),X=[R,H("foe",10,10),H("foe",614,10),H("foe",614,452),H("foe",300,200),H("foe",400,300),H("foe",500,400),H("foe",10,452),H("foe",100,100),H("foe",100,118),H("foe",116,118),H("foe",116,100)],N.fillStyle="#fff",N.fillRect(0,0,K.width,K.height),L=1);break;case 1:u()?[R.moveX,R.moveY]=[w,v]:(R.moveLeft=o(["ArrowLeft","KeyA","KeyQ"]),R.moveRight=o(["ArrowRight","KeyD"]),R.moveUp=o(["ArrowUp","KeyW","KeyZ"]),R.moveDown=o(["ArrowDown","KeyS"]),R.moveX=R.moveLeft||R.moveRight?(R.moveLeft>R.moveRight?-1:1)*h(0,1,(O-Math.max(R.moveLeft,R.moveRight))/150):0,R.moveY=R.moveDown||R.moveUp?(R.moveUp>R.moveDown?-1:1)*h(0,1,(O-Math.max(R.moveUp,R.moveDown))/150):0);break;case 2:i("KeyT")&&(async e=>{if(navigator.canShare&&navigator.canShare(e))try{await navigator.share(e)}catch{}else open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(e.text)}%20${encodeURIComponent(e.url)}`,"_blank")})({title:document.title,text:"Check this game template made by @herebefrogs",url:"https://bit.ly/gmjblp"}),(a()||M())&&(L=0)}})(),L){case 1:0>(b-=P)&&(L=2),X.forEach(V),X.slice(1).forEach((e=>{const t=((e,t)=>{const o={entity1MaxX:e.x+e.w,entity1MaxY:e.y+e.h,entity2MaxX:t.x+t.w,entity2MaxY:t.y+t.h};return o.collide=o.entity2MaxX>e.x&&o.entity1MaxX>t.x&&o.entity2MaxY>e.y&&o.entity1MaxY>t.y,o})(R,e);t.collide&&((e,t,o)=>{const{entity1MaxX:n,entity1MaxY:a,entity2MaxX:i,entity2MaxY:h}=o,r=n-t.x,m=a-t.y,d=i-e.x,w=h-e.y;e.moveX>0&&e.moveY>0?m>r?e.x-=r:e.y-=m:e.moveX>0&&0>e.moveY?w>r?e.x-=r:e.y+=w:e.moveX>0?e.x-=r:0>e.moveX&&e.moveY>0?m>d?e.x+=d:e.y-=m:0>e.moveX&&0>e.moveY?w>d?e.x+=d:e.y+=w:0>e.moveX?e.x+=d:e.moveY>0?e.y-=m:0>e.moveY&&(e.y+=w)})(R,e,t)})),0>(e=R).x?e.x=0:e.x>K.width-e.w&&(e.x=K.width-e.w),0>e.y?e.y=0:e.y>K.height-e.h&&(e.y=K.height-e.h),Z>0&&Z+100>R.x?Z=Math.max(0,R.x-100):K.width-j.width>Z&&R.x+R.w>Z+T&&(Z=Math.min(K.width-j.width,R.x+R.w-T)),z>0&&z+50>R.y?z=Math.max(0,R.y-50):K.height-j.height>z&&R.y+R.h>z+S&&(z=Math.min(K.height-j.height,R.y+R.h-S))}var e})(),(()=>{switch(I.fillStyle="#fff",I.fillRect(0,0,j.width,j.height),L){case 0:k("title screen",8,8),k(E?"tap to start":"press any key",j.width/2,j.height/2,1),Y===D.length&&k("konami mode on",j.width-8,8,2);break;case 1:I.drawImage(K,Z,z,j.width,j.height,0,0,j.width,j.height),k("game screen",8,8),(()=>{const e=Math.floor(Math.ceil(b)/60),t=Math.ceil(b)-60*e;k(`${e}:${t>9?"":"0"}${t}`,j.width-8,8,2)})(),X.forEach((e=>((e,t=I)=>{const o=C[e.type][e.action][e.frame];t.drawImage(B,o.x,o.y,o.w,o.h,Math.round(e.x-Z),Math.round(e.y-z),o.w,o.h)})(e)));break;case 2:k("end screen",8,8)}U.drawImage(j,0,0,j.width,j.height,0,0,c.width,c.height)})(),Q=O)}function W(e){(G=e)?(Q=performance.now(),J()):cancelAnimationFrame(F)}onload=async()=>{document.title="Game Jam Boilerplate",onresize(),await(async e=>{p=e,x=await r("data:image/webp;base64,UklGRngBAABXRUJQVlA4TGwBAAAvV8EBEB8gFkz258+bhkAgiWF/1wkEKAr/L5v/APCvBpIbwI0jiYD/0n9D4RzKZze0EtD672FnsP8Ngdyjj58hNIFh2ZtCRP8Vtm3bOED3UJ1eERFttqgREbO1GQQQS+Jca1QaDwpGnBHXek3SGi0ZiKOKiOS+1ykiE0al8gXudIFjgbt3hdJ4Ep0ErBMN1BXWC3OkRhF58Q85zJn/+T/RPjuUJ4IdxhW2mu944p2YTGRbRpntp23LxmRPIn96wL69T4OR7MSV9+Mr+g77pvjQathhF4OFXX7Bsz1K16GjDIXhpHBLuUER/vfED/tmKzn49W963N9hl/2yr+ydbepfYNuSZdeeWwu7zQXY28P7nPO8Q2GDsgZjAj/kZN2TbxR8Xi3b2cFjK1jcT5YcORVO8q5eO+VmlE5yP3sXdKRjyfRpKEvEf4/Fpc2TgyofNGvMiMNBco2Yed81rsTFPzgy6rVd67Hkjkh7vUoT")})(I),B=await r("data:image/webp;base64,UklGRvoAAABXRUJQVlA4TO0AAAAvT0AEEDegkI0kaD+kdVj40zgoxYwkQfMfg2v9l2M9lkVNACQMNCEIOPq3MIcHQbZNzcZ+sgcAlZ/5PdWeeOv2wFEjSY40hsA6AKNGsFJJ/T/DYLQIHH8MN129s4cgov8M3LaNw7a7txjZL8LDMf4r1rB0GSKbF4K5y4uBYq1A7jI7NNPSPhx6rQhN3S6ELpWd5FLH6IMjN7si35Udo6HZUgsM1NDha+wM4Efs2i4OQugUTtuccnZpNrxcDsoNs07A9qEHl7O/h4PmDm65el34+cPABatIskq6UUQaaUtaABHLKZAohglQpAV4vgkA"),W(!0)},onresize=onrotate=()=>{const e=Math.min(innerWidth/j.width,innerHeight/j.height);c.width=j.width*e,c.height=j.height*e,U.imageSmoothingEnabled=N.imageSmoothingEnabled=I.imageSmoothingEnabled=!1,window.focus()},document.onvisibilitychange=e=>{W(!e.target.hidden)},addEventListener("keydown",(e=>{e.repeat||1!==L||"KeyP"!==e.code||W(!G)}))})();</script>